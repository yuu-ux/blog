{% extends 'includes/layout.html' %}

{% block body %}
<div id="view-mode" class="bg-white p-6 rounded shadow">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-bold">{{ post.title }}</h2>
    <button id="edit-btn" class="text-sm bg-gray-500 text-white px-3 py-1 rounded hover:bg-gray-600">編集</button>
  </div>
  <div class="text-gray-800 whitespace-pre-line">
    {{ post.body }}
  </div>
</div>

<div id="edit-mode" class="bg-white p-6 rounded shadow hidden">
  <input type="text" id="edit-title" class="w-full mb-3 border p-2 rounded" value="{{ post.title }}">
  {{ form.body(id="edit-body", class="w-full h-60 border p-2 rounded") }}
  <div class="flex gap-2 mt-4">
    <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">更新</button>
    <button id="cancel-btn" class="bg-gray-300 text-black px-4 py-2 rounded hover:bg-gray-400">戻る</button>
  </div>
</div>
{% endblock %}

{% block script %}
<script>
  const simplemde = new SimpleMDE({ element: document.getElementById("edit-body") });
  const editBtn = document.getElementById('edit-btn');
  const cancelBtn = document.getElementById('cancel-btn');
  const viewMode = document.getElementById('view-mode');
  const editMode = document.getElementById('edit-mode');

  editBtn.addEventListener('click', () => {
    viewMode.classList.add('hidden');
    editMode.classList.remove('hidden');
  });

  cancelBtn.addEventListener('click', () => {
    editMode.classList.add('hidden');
    viewMode.classList.remove('hidden');
  });
</script>
{% endblock %}
